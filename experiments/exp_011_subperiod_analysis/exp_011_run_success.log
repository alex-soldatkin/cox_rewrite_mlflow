/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/mlflow_utils/quarterly_window_loader.py:115: FutureWarning: Constructing PeriodIndex from fields is deprecated. Use PeriodIndex.from_fields instead.
  df_all['quarter'] = pd.PeriodIndex(
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column family_connection_ratio_x_crisis_2004 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'family_connection_ratio_x_crisis_2004'].var())
>>> print(df.loc[~events, 'family_connection_ratio_x_crisis_2004'].var())

A very low variance means that the column family_connection_ratio_x_crisis_2004 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column state_ownership_pct_x_crisis_2004 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'state_ownership_pct_x_crisis_2004'].var())
>>> print(df.loc[~events, 'state_ownership_pct_x_crisis_2004'].var())

A very low variance means that the column state_ownership_pct_x_crisis_2004 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column foreign_ownership_total_pct_x_crisis_2004 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'foreign_ownership_total_pct_x_crisis_2004'].var())
>>> print(df.loc[~events, 'foreign_ownership_total_pct_x_crisis_2004'].var())

A very low variance means that the column foreign_ownership_total_pct_x_crisis_2004 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column family_connection_ratio_x_crisis_2004 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'family_connection_ratio_x_crisis_2004'].var())
>>> print(df.loc[~events, 'family_connection_ratio_x_crisis_2004'].var())

A very low variance means that the column family_connection_ratio_x_crisis_2004 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/mlflow_utils/quarterly_window_loader.py:115: FutureWarning: Constructing PeriodIndex from fields is deprecated. Use PeriodIndex.from_fields instead.
  df_all['quarter'] = pd.PeriodIndex(
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column state_ownership_pct_x_crisis_2008 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'state_ownership_pct_x_crisis_2008'].var())
>>> print(df.loc[~events, 'state_ownership_pct_x_crisis_2008'].var())

A very low variance means that the column state_ownership_pct_x_crisis_2008 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column state_ownership_pct_x_crisis_2008 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'state_ownership_pct_x_crisis_2008'].var())
>>> print(df.loc[~events, 'state_ownership_pct_x_crisis_2008'].var())

A very low variance means that the column state_ownership_pct_x_crisis_2008 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/mlflow_utils/quarterly_window_loader.py:115: FutureWarning: Constructing PeriodIndex from fields is deprecated. Use PeriodIndex.from_fields instead.
  df_all['quarter'] = pd.PeriodIndex(


################################################################################
# RUNNING SUBPERIOD: 2004-2007
################################################################################

Setting MLflow experiment to: exp_011_subperiod_2004_2007

======================================================================
LOADING DATA WITH 4-QUARTER LAG
======================================================================

1. Loading bank population from Neo4j...
   Found 1904 banks from Neo4j

2. Loading accounting data...
  Loading from: /Users/alexandersoldatkin/projects/factions-networks-thesis/drafts/accounting_cbr_imputed/final_final_banking_indicators.parquet
  Loaded 37,756 accounting observations
  Date range: 2004-02-01 00:00:00 to 2007-12-01 00:00:00
  Unique banks (regn): 1057
  ‚úÖ Mapped CAMEL ratios: camel_roa, camel_npl_ratio, camel_tier1_capital_ratio
   Accounting obs: 37,756
   Date range: 2004-02-01 00:00:00 to 2007-12-01 00:00:00
   Quarter range: 2004Q1 to 2007Q4

3. Merging accounting with Neo4j population...
   Merged: 34,013 observations
   ‚úÖ Mapped family/foreign features from Neo4j

4. Loading quarterly network snapshots...
Loading quarterly network snapshots from: /Users/alexandersoldatkin/projects/cos_rewrite_mlflow/rolling_windows/output/quarterly_2010_2020
  Found 44 quarterly windows
  Loaded 1,713,557 bank-quarter observations
  Date range: 2010Q1 to 2020Q4
  Unique banks (Id): 33,877
  Unique banks (regn_cbr): 1,060

5. Creating 4-quarter lagged network metrics...
   Lagged network obs: 1,713,557
   Lagged quarter range: 2011Q1 to 2021Q4

6. Merging accounting_t with network_{t-lag}...
   Merged obs: 34,013
   Network matches: 0 (0.0%)

‚ö†Ô∏è  WARNING: Low match rate (0.0%)
   Possible issues:
   - Lag too large (not enough historical data)
   - Id mismatch between accounting and network
   - Quarterly data missing for some periods

7. Creating event indicators (exp_004 pattern)...
   Dead banks: 669
   Events (last obs only): 669 (2.0%)

‚úÖ Data loading complete!
   Total observations: 34,013
   Unique banks: 944
   Date range: 2004-02-01 00:00:00 to 2007-12-01 00:00:00
   Lag specification: 4 quarters (1.0 years)

============================================================
SUBPERIOD: 2004-2007
============================================================
Observations after time filter: 34013
Unique banks: 944
Events: 669
  crisis_2004: 1,314 obs (3.9%)
  Dropping constant column: rw_page_rank_4q_lag
  Dropping constant column: rw_out_degree_4q_lag
  Dropping constant column: camel_roa
  ‚úÖ Scaled 6 features to 0-100 range

Final dataset: 33,966 observations, 944 banks, 669 events

============================================================
MODEL: M1: Baseline (2004-2007)
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + camel_npl_ratio + camel_tier1_capital_ratio
Training observations: 33,966
Events: 669 (2.0%)

‚úÖ Model converged successfully
   C-index: 0.6536

‚úÖ Model converged successfully
   C-index: 0.6536
   Log-likelihood: -4122.15
   AIC: 8256.31
üèÉ View run M1: Baseline (2004-2007) at: http://127.0.0.1:5000/#/experiments/14/runs/eb01b1b2edde42cebb6c994d57a6c59e
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/14

============================================================
MODEL: M2: Crisis 2004 Indicator
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2004
Training observations: 33,966
Events: 669 (2.0%)

‚úÖ Model converged successfully
   C-index: 0.6505

‚úÖ Model converged successfully
   C-index: 0.6505
   Log-likelihood: -4121.29
   AIC: 8256.58
üèÉ View run M2: Crisis 2004 Indicator at: http://127.0.0.1:5000/#/experiments/14/runs/63deb2faf92f4a3392dbc5b2cf8efa58
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/14

============================================================
MODEL: M3: Family √ó Crisis 2004
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2004 + family_connection_ratio_x_crisis_2004
Training observations: 33,966
Events: 669 (2.0%)

‚úÖ Model converged successfully
   C-index: 0.6505

‚úÖ Model converged successfully
   C-index: 0.6505
   Log-likelihood: -4121.16
   AIC: 8258.31
üèÉ View run M3: Family √ó Crisis 2004 at: http://127.0.0.1:5000/#/experiments/14/runs/af68e64f6e644b97bfcb1fbdd6c85643
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/14

============================================================
MODEL: M4: State √ó Crisis 2004
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2004 + state_ownership_pct_x_crisis_2004
Training observations: 33,966
Events: 669 (2.0%)

‚úÖ Model converged successfully
   C-index: 0.6505

‚úÖ Model converged successfully
   C-index: 0.6505
   Log-likelihood: -4121.29
   AIC: 8258.57
üèÉ View run M4: State √ó Crisis 2004 at: http://127.0.0.1:5000/#/experiments/14/runs/5f5d56e0c3b44fd9ad239fbad3100498
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/14

============================================================
MODEL: M5: Foreign √ó Crisis 2004
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2004 + foreign_ownership_total_pct_x_crisis_2004
Training observations: 33,966
Events: 669 (2.0%)

‚úÖ Model converged successfully
   C-index: 0.6505

‚úÖ Model converged successfully
   C-index: 0.6505
   Log-likelihood: -4121.29
   AIC: 8258.57
üèÉ View run M5: Foreign √ó Crisis 2004 at: http://127.0.0.1:5000/#/experiments/14/runs/0592d2982d96401c916100588b83f1cc
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/14

============================================================
MODEL: M6: Full Interactions (2004)
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2004 + family_connection_ratio_x_crisis_2004 + state_ownership_pct_x_crisis_2004 + foreign_ownership_total_pct_x_crisis_2004
Training observations: 33,966
Events: 669 (2.0%)

‚úÖ Model converged successfully
   C-index: 0.6505

‚úÖ Model converged successfully
   C-index: 0.6505
   Log-likelihood: -4121.15
   AIC: 8262.29
üèÉ View run M6: Full Interactions (2004) at: http://127.0.0.1:5000/#/experiments/14/runs/e17dcbf1f79e47af911d2a00d96444b3
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/14

‚úÖ Completed subperiod: 2004-2007


################################################################################
# RUNNING SUBPERIOD: 2007-2013
################################################################################

Setting MLflow experiment to: exp_011_subperiod_2007_2013

======================================================================
LOADING DATA WITH 4-QUARTER LAG
======================================================================

1. Loading bank population from Neo4j...
   Found 1904 banks from Neo4j

2. Loading accounting data...
  Loading from: /Users/alexandersoldatkin/projects/factions-networks-thesis/drafts/accounting_cbr_imputed/final_final_banking_indicators.parquet
  Loaded 80,161 accounting observations
  Date range: 2007-01-01 00:00:00 to 2013-12-01 00:00:00
  Unique banks (regn): 1158
  ‚úÖ Mapped CAMEL ratios: camel_roa, camel_npl_ratio, camel_tier1_capital_ratio
   Accounting obs: 80,161
   Date range: 2007-01-01 00:00:00 to 2013-12-01 00:00:00/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column state_ownership_pct_x_crisis_2014 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'state_ownership_pct_x_crisis_2014'].var())
>>> print(df.loc[~events, 'state_ownership_pct_x_crisis_2014'].var())

A very low variance means that the column state_ownership_pct_x_crisis_2014 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)
/Users/alexandersoldatkin/projects/cos_rewrite_mlflow/.venv/lib/python3.13/site-packages/lifelines/utils/__init__.py:1120: ConvergenceWarning: Column state_ownership_pct_x_crisis_2014 have very low variance when conditioned on death event present or not. This may harm convergence. This could be a form of 'complete separation'. For example, try the following code:

>>> events = df['event'].astype(bool)
>>> print(df.loc[events, 'state_ownership_pct_x_crisis_2014'].var())
>>> print(df.loc[~events, 'state_ownership_pct_x_crisis_2014'].var())

A very low variance means that the column state_ownership_pct_x_crisis_2014 completely determines whether a subject dies or not. See https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression.

  warnings.warn(dedent(warning_text), ConvergenceWarning)

   Quarter range: 2007Q1 to 2013Q4

3. Merging accounting with Neo4j population...
   Merged: 70,218 observations
   ‚úÖ Mapped family/foreign features from Neo4j

4. Loading quarterly network snapshots...
Loading quarterly network snapshots from: /Users/alexandersoldatkin/projects/cos_rewrite_mlflow/rolling_windows/output/quarterly_2010_2020
  Found 44 quarterly windows
  Loaded 1,713,557 bank-quarter observations
  Date range: 2010Q1 to 2020Q4
  Unique banks (Id): 33,877
  Unique banks (regn_cbr): 1,060

5. Creating 4-quarter lagged network metrics...
   Lagged network obs: 1,713,557
   Lagged quarter range: 2011Q1 to 2021Q4

6. Merging accounting_t with network_{t-lag}...
   Merged obs: 70,290
   Network matches: 29,829 (42.4%)

‚ö†Ô∏è  WARNING: Low match rate (42.4%)
   Possible issues:
   - Lag too large (not enough historical data)
   - Id mismatch between accounting and network
   - Quarterly data missing for some periods

7. Creating event indicators (exp_004 pattern)...
   Dead banks: 688
   Events (last obs only): 688 (1.0%)

‚úÖ Data loading complete!
   Total observations: 70,290
   Unique banks: 1,001
   Date range: 2007-01-01 00:00:00 to 2013-12-01 00:00:00
   Lag specification: 4 quarters (1.0 years)

============================================================
SUBPERIOD: 2007-2013
============================================================
Observations after time filter: 70290
Unique banks: 1001
Events: 688
  crisis_2008: 12,839 obs (18.3%)
  Dropping constant column: camel_roa
  ‚úÖ Scaled 8 features to 0-100 range

Final dataset: 70,135 observations, 1001 banks, 688 events

============================================================
MODEL: M1: Baseline (2007-2013)
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_npl_ratio + camel_tier1_capital_ratio
Training observations: 70,135
Events: 688 (1.0%)

‚úÖ Model converged successfully
   C-index: 0.6792

‚úÖ Model converged successfully
   C-index: 0.6792
   Log-likelihood: -4329.94
   AIC: 8675.88
üèÉ View run M1: Baseline (2007-2013) at: http://127.0.0.1:5000/#/experiments/15/runs/fb66bd4a9d49438fb4a53133f651b6f9
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/15

============================================================
MODEL: M2: Crisis 2008 Indicator
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2008
Training observations: 70,135
Events: 688 (1.0%)

‚úÖ Model converged successfully
   C-index: 0.6954

‚úÖ Model converged successfully
   C-index: 0.6954
   Log-likelihood: -4329.89
   AIC: 8677.78
üèÉ View run M2: Crisis 2008 Indicator at: http://127.0.0.1:5000/#/experiments/15/runs/7f97e5cf9dcc4f08893a487578bb064b
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/15

============================================================
MODEL: M3: Family √ó Crisis 2008
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2008 + family_connection_ratio_x_crisis_2008
Training observations: 70,135
Events: 688 (1.0%)

‚úÖ Model converged successfully
   C-index: 0.6957

‚úÖ Model converged successfully
   C-index: 0.6957
   Log-likelihood: -4329.83
   AIC: 8679.66
üèÉ View run M3: Family √ó Crisis 2008 at: http://127.0.0.1:5000/#/experiments/15/runs/279d60e21b484cc3861db740e665766b
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/15

============================================================
MODEL: M4: State √ó Crisis 2008
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2008 + state_ownership_pct_x_crisis_2008
Training observations: 70,135
Events: 688 (1.0%)

‚úÖ Model converged successfully
   C-index: 0.6954

‚úÖ Model converged successfully
   C-index: 0.6954
   Log-likelihood: -4329.85
   AIC: 8679.71
üèÉ View run M4: State √ó Crisis 2008 at: http://127.0.0.1:5000/#/experiments/15/runs/f9b299ee03e24c66ad8c205fc76e399a
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/15

============================================================
MODEL: M5: Foreign √ó Crisis 2008
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2008 + foreign_ownership_total_pct_x_crisis_2008
Training observations: 70,135
Events: 688 (1.0%)

‚úÖ Model converged successfully
   C-index: 0.6956

‚úÖ Model converged successfully
   C-index: 0.6956
   Log-likelihood: -4329.84
   AIC: 8679.69
üèÉ View run M5: Foreign √ó Crisis 2008 at: http://127.0.0.1:5000/#/experiments/15/runs/a3b0e020e2d7419e9147d79ba6953bff
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/15

============================================================
MODEL: M6: Full Interactions (2008)
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2008 + family_connection_ratio_x_crisis_2008 + state_ownership_pct_x_crisis_2008 + foreign_ownership_total_pct_x_crisis_2008
Training observations: 70,135
Events: 688 (1.0%)

‚úÖ Model converged successfully
   C-index: 0.6960

‚úÖ Model converged successfully
   C-index: 0.6960
   Log-likelihood: -4329.75
   AIC: 8683.50
üèÉ View run M6: Full Interactions (2008) at: http://127.0.0.1:5000/#/experiments/15/runs/87eff00668ef44d18896d44cb625019f
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/15

‚úÖ Completed subperiod: 2007-2013


################################################################################
# RUNNING SUBPERIOD: 2013-2020
################################################################################

Setting MLflow experiment to: exp_011_subperiod_2013_2020

======================================================================
LOADING DATA WITH 4-QUARTER LAG
======================================================================

1. Loading bank population from Neo4j...
   Found 1904 banks from Neo4j

2. Loading accounting data...
  Loading from: /Users/alexandersoldatkin/projects/factions-networks-thesis/drafts/accounting_cbr_imputed/final_final_banking_indicators.parquet
  Loaded 62,336 accounting observations
  Date range: 2013-01-01 00:00:00 to 2020-12-01 00:00:00
  Unique banks (regn): 976
  ‚úÖ Mapped CAMEL ratios: camel_roa, camel_npl_ratio, camel_tier1_capital_ratio
   Accounting obs: 62,336
   Date range: 2013-01-01 00:00:00 to 2020-12-01 00:00:00
   Quarter range: 2013Q1 to 2020Q4

3. Merging accounting with Neo4j population...
   Merged: 54,100 observations
   ‚úÖ Mapped family/foreign features from Neo4j

4. Loading quarterly network snapshots...
Loading quarterly network snapshots from: /Users/alexandersoldatkin/projects/cos_rewrite_mlflow/rolling_windows/output/quarterly_2010_2020
  Found 44 quarterly windows
  Loaded 1,713,557 bank-quarter observations
  Date range: 2010Q1 to 2020Q4
  Unique banks (Id): 33,877
  Unique banks (regn_cbr): 1,060

5. Creating 4-quarter lagged network metrics...
   Lagged network obs: 1,713,557
   Lagged quarter range: 2011Q1 to 2021Q4

6. Merging accounting_t with network_{t-lag}...
   Merged obs: 54,386
   Network matches: 54,277 (99.8%)

7. Creating event indicators (exp_004 pattern)...
   Dead banks: 508
   Events (last obs only): 508 (0.9%)

‚úÖ Data loading complete!
   Total observations: 54,386
   Unique banks: 829
   Date range: 2013-01-01 00:00:00 to 2020-12-01 00:00:00
   Lag specification: 4 quarters (1.0 years)

============================================================
SUBPERIOD: 2013-2020
============================================================
Observations after time filter: 54386
Unique banks: 829
Events: 508
  crisis_2014: 15,617 obs (28.7%)
  ‚úÖ Scaled 9 features to 0-100 range

Final dataset: 53,957 observations, 829 banks, 508 events

============================================================
MODEL: M1: Baseline (2013-2020)
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_roa + camel_npl_ratio + camel_tier1_capital_ratio
Training observations: 53,957
Events: 508 (0.9%)

‚úÖ Model converged successfully
   C-index: 0.6386

‚úÖ Model converged successfully
   C-index: 0.6386
   Log-likelihood: -3142.00
   AIC: 6302.00
üèÉ View run M1: Baseline (2013-2020) at: http://127.0.0.1:5000/#/experiments/16/runs/6e3aa72ee1f44a3a9fb4b68fc411e4d2
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/16

============================================================
MODEL: M2: Crisis 2014 Indicator
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_roa + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2014
Training observations: 53,957
Events: 508 (0.9%)

‚úÖ Model converged successfully
   C-index: 0.6262

‚úÖ Model converged successfully
   C-index: 0.6262
   Log-likelihood: -3141.97
   AIC: 6303.95
üèÉ View run M2: Crisis 2014 Indicator at: http://127.0.0.1:5000/#/experiments/16/runs/3433d696d6474ff2ac4725bc4e6912c0
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/16

============================================================
MODEL: M3: Family √ó Crisis 2014
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_roa + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2014 + family_connection_ratio_x_crisis_2014
Training observations: 53,957
Events: 508 (0.9%)

‚úÖ Model converged successfully
   C-index: 0.6184

‚úÖ Model converged successfully
   C-index: 0.6184
   Log-likelihood: -3140.86
   AIC: 6303.73
üèÉ View run M3: Family √ó Crisis 2014 at: http://127.0.0.1:5000/#/experiments/16/runs/1e000c42ccf245c2996c2f287644bf21
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/16

============================================================
MODEL: M4: State √ó Crisis 2014
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_roa + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2014 + state_ownership_pct_x_crisis_2014
Training observations: 53,957
Events: 508 (0.9%)

‚úÖ Model converged successfully
   C-index: 0.6266

‚úÖ Model converged successfully
   C-index: 0.6266
   Log-likelihood: -3141.78
   AIC: 6305.55
üèÉ View run M4: State √ó Crisis 2014 at: http://127.0.0.1:5000/#/experiments/16/runs/89806f3f23714ca49ebe1d07c4f1562d
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/16

============================================================
MODEL: M5: Foreign √ó Crisis 2014
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_roa + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2014 + foreign_ownership_total_pct_x_crisis_2014
Training observations: 53,957
Events: 508 (0.9%)

‚úÖ Model converged successfully
   C-index: 0.6285

‚úÖ Model converged successfully
   C-index: 0.6285
   Log-likelihood: -3141.25
   AIC: 6304.50
üèÉ View run M5: Foreign √ó Crisis 2014 at: http://127.0.0.1:5000/#/experiments/16/runs/6aa90d361e07468d8726fff5f1f258db
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/16

============================================================
MODEL: M6: Full Interactions (2014)
============================================================
Formula: event ~ family_connection_ratio + family_ownership_pct + state_ownership_pct + foreign_ownership_total_pct + rw_page_rank_4q_lag + rw_out_degree_4q_lag + camel_roa + camel_npl_ratio + camel_tier1_capital_ratio + crisis_2014 + family_connection_ratio_x_crisis_2014 + state_ownership_pct_x_crisis_2014 + foreign_ownership_total_pct_x_crisis_2014
Training observations: 53,957
Events: 508 (0.9%)

‚úÖ Model converged successfully
   C-index: 0.6211

‚úÖ Model converged successfully
   C-index: 0.6211
   Log-likelihood: -3139.95
   AIC: 6305.90
üèÉ View run M6: Full Interactions (2014) at: http://127.0.0.1:5000/#/experiments/16/runs/95a33f8494c94b269afcd0ea7aa7e58f
üß™ View experiment at: http://127.0.0.1:5000/#/experiments/16

‚úÖ Completed subperiod: 2013-2020


################################################################################
# ALL SUBPERIODS COMPLETED
################################################################################

2004-2007: 6/6 models converged
2007-2013: 6/6 models converged
2013-2020: 6/6 models converged
